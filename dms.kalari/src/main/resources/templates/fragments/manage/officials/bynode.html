<!-- fragments/node_users.html -->
<div th:fragment="content" /*th:if="${showMemberPanel}"*/>


<div class="container mt-1 mb-3" style="padding-left: 0px !important;margin-left: 0px;">
    <div class="d-flex justify-content-between align-items-center">
        
        <!-- Left: Node Name -->
		<div>
		    <h4 class="mb-0 px-3 py-2 rounded" 
		        style="background-color: var(--bs-gray-200); font-size: 1.1rem; font-weight: 600; color: var(--bs-dark);">
		        <label th:text="${nodeName}">Branch</label>
		    </h4>
		</div>



        <!-- Right: Radio Buttons -->
        <div class="d-flex align-items-center gap-3">
            <input type="hidden" id="tempSelectedId" name="tempSelectedId" th:value="${parentId}" />

<div th:if="${nodeType != 'KALARI' and #authorization.expression('hasAuthority(''PRIV_branch_nodelist'')')}"
     class="form-check form-check-inline">
    <input class="form-check-input" type="radio" name="choice"
           id="option1" value="nodes"
           th:onchange="|loadContent('branch_nodelist/${parentId}', '#users_target'); clearTreeForm()|">
    <label class="form-check-label" for="option1" style="cursor: pointer;">Affiliations</label>
</div>

<div th:if="${#authorization.expression('hasAuthority(''PRIV_officials_bynode'')')}"
     class="form-check form-check-inline">
    <input class="form-check-input" type="radio" name="choice"
           id="option2" value="officials" checked
           th:onchange="|loadContent('officials_bynode/${parentId}', '#users_target'); clearTreeForm()|">
    <label class="form-check-label" for="option2" style="cursor: pointer;">Officials</label>
</div>

<div th:if="${nodeType == 'KALARI' and #authorization.expression('hasAuthority(''PRIV_members_bynode'')')}"
     class="form-check form-check-inline">
    <input class="form-check-input" type="radio" name="choice"
           id="option3" value="members"
           th:onchange="|loadContent('members_bynode/${parentId}', '#users_target'); clearTreeForm()|">
    <label class="form-check-label" for="option3" style="cursor: pointer;">Participants</label>
</div>

<div th:if="${#authorization.expression('hasAuthority(''PRIV_events_bynode'')')}"
     class="form-check form-check-inline">
    <input class="form-check-input" type="radio" name="choice"
           id="option4" value="events"
           th:onchange="|loadContent('events_byhost/${parentId}', '#users_target'); clearTreeForm()|">
    <label class="form-check-label" for="option4" style="cursor: pointer;">Events</label>
</div>

        </div>
    </div>
</div>




	<div class="d-flex justify-content-between align-items-center mb-3">
       <h4 class="mb-0">Officials (<span th:text="${#lists.size(users)}"></span>)</h4> <h1>  <!--  (<span //th:text="${isChild}"></span>)</h1>-->
    
<a th:if="${(!isChild and #authorization.expression('hasAuthority(''PRIV_officials_add'')')) 
           or (isChild and #authorization.expression('hasAuthority(''PRIV_officials_add_child'')'))}" 
   class="btn btn-primary ajax-link" 
   href="javascript:void(0);" 
   th:onclick="'loadContent(\'' + @{'/officials_add/' + ${parentId}} + '\', \'modal\')'">
    <i class="fas fa-plus"></i> Add New Official 
</a>


</div>


	<div class="table-responsive">
		<table
			class="table table-striped table-hover table-bordered align-middle">
			<thead class="table-light">
				<tr>
					<th scope="col">#</th>
					<th scope="col">Name</th>
					<th scope="col">Type</th>
					<th scope="col">Status</th>
					<th scope="col">Actions</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="user, iterStat : ${users}">
					<th scope="row" th:text="${iterStat.count}">1</th>
					<td th:text="${user.userFname} + ' ' + ${user.userLname}">John
						Doe</td>
					<td th:text="${user.designation.desigName}">johndoe</td>
					<td><span
						th:classappend="${user.userStatus == 1} ? 'badge bg-success' : 'badge bg-secondary'"
						th:text="${user.userStatus == 1} ? 'Active' : 'Inactive'">Status</span>
					</td>
					<td><th:block>
							<a class="ajax-link btn btn-sm btn-outline-secondary"
								href="javascript:void(0);"
								th:onclick="'loadContent(\'/officials_details/' + ${xorMaskHelper.mask(user.userId)} + '\', \'modal\')'">
								<i class="fas fa-eye"></i> View
							</a>
						</th:block> 

						</th:block>
						
						<a th:if="${(!isChild and #authorization.expression('hasAuthority(''PRIV_officials_edit'')')) 
						           or (isChild and #authorization.expression('hasAuthority(''PRIV_officials_edit_child'')'))}" 
						   class="ajax-link btn btn-sm btn-outline-secondary" 
						   href="javascript:void(0);" 
						   th:onclick="'loadContent(\'/officials_edit/' + ${xorMaskHelper.mask(user.userId)} + '\', \'modal\')'">
						    <i class="fas fa-edit"></i> Edit
						</a>
					
					</td>
				</tr>
				<tr th:if="${#lists.isEmpty(users)}">
                    <td colspan="7" class="text-center py-3">No Officials found</td>
                </tr>
			</tbody>
		</table>
	</div>
</div>
