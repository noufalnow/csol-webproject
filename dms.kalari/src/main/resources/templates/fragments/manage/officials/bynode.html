<!-- fragments/node_users.html -->
<div th:fragment="content" /*th:if="${showMemberPanel}" * />


<div class="container mt-1 mb-3 px-0">
	<div class="row align-items-center">

		<!-- Left: Node Name (4 cols) -->
		<div class="col-12 col-md-4 mb-2 mb-md-0">
			<h4 class="mb-0 px-3 py-2 rounded"
				style="background-color: var(--bs-gray-200); font-size: 1.1rem; font-weight: 600; color: var(--bs-dark);">
				<label th:text="${nodeName}">Branch</label>
			</h4>
		</div>

		<!-- Right: Radio Buttons (8 cols) -->
		<div class="col-12 col-md-8">
			<div class="row" style="padding-left: .75rem;">
				<input type="hidden" id="tempSelectedId" name="tempSelectedId"
					th:value="${parentId}" />

				<div
					th:if="${nodeType != 'KALARI' and #authorization.expression('hasAuthority(''PRIV_branch_nodelist'')')}"
					class="col-6 col-md-3 mb-2 mb-md-0">
					<div class="form-check">
						<input class="form-check-input" type="radio" name="choice"
							id="option1" value="nodes"
							th:onclick="|loadContent('branch_nodelist/${parentId}', '#users_target'); clearTreeForm()|">
						<label class="form-check-label" for="option1"
							style="cursor: pointer;">Associations</label>
					</div>
				</div>

				<div
					th:if="${#authorization.expression('hasAuthority(''PRIV_officials_bynode'')')}"
					class="col-6 col-md-3 mb-2 mb-md-0">
					<div class="form-check">
						<input class="form-check-input" type="radio" name="choice"
							id="option2" value="officials" checked
							th:onclick="|loadContent('officials_bynode/${parentId}', '#users_target'); clearTreeForm()|">
						<label class="form-check-label" for="option2"
							style="cursor: pointer;">Officials</label>
					</div>
				</div>

				<div
					th:if="${nodeType == 'KALARI' and #authorization.expression('hasAuthority(''PRIV_members_bynode'')')}"
					class="col-6 col-md-3 mb-2 mb-md-0">
					<div class="form-check">
						<input class="form-check-input" type="radio" name="choice"
							id="option3" value="members"
							th:onclick="|loadContent('members_bynode/${parentId}', '#users_target'); clearTreeForm()|">
						<label class="form-check-label" for="option3"
							style="cursor: pointer;">Participants</label>
					</div>
				</div>

				<div
					th:if="${#authorization.expression('hasAuthority(''PRIV_champ_eventbynode'')')}"
					class="col-6 col-md-3 mb-2 mb-md-0">
					<div class="form-check">
						<input class="form-check-input" type="radio" name="choice"
							id="option4" value="events"
							th:onclick="|loadContent('champ_eventbynode/${parentId}', '#users_target'); clearTreeForm()|">
						<label class="form-check-label" for="option4"
							style="cursor: pointer;">Events</label>
					</div>
				</div>

				<div
					th:if="${nodeType == 'KALARI' and #authorization.expression('hasAuthority(''PRIV_champ_eventall'')')}"
					class="col-6 col-md-3 mb-2 mb-md-0">
					<div class="form-check">
						<input class="form-check-input" type="radio" name="choice"
							id="option5" value="eventsall"
							th:onclick="|loadContent('champ_eventall/${parentId}', '#users_target'); clearTreeForm()|">
						<label class="form-check-label" for="option5"
							style="cursor: pointer;">All Events</label>
					</div>
				</div>

			</div>
		</div>
	</div>
</div>





<div class="d-flex justify-content-between align-items-center mb-3">
	<h4 class="mb-0">
		OFFICIALS [<span th:text="${#lists.size(users)}"></span>]
	</h4>
	<h1>
		<!--  (<span //th:text="${isChild}"></span>)</h1>-->

		<a
			th:if="${(!isChild and #authorization.expression('hasAuthority(''PRIV_officials_add'')')) 
           or (isChild and #authorization.expression('hasAuthority(''PRIV_officials_add_child'')'))}"
			class="btn btn-sm btn-outline-primary me-1 ajax-link"
			href="javascript:void(0);"
			th:onclick="'loadContent(\'' + @{'/officials_add/' + ${parentId}} + '\', \'modal\')'">
			<i class="fas fa-plus"></i> Add New Official
		</a>
</div>


<div class="table-responsive">
	<table
		class="table table-striped table-hover table-bordered align-middle">
		<thead class="table-light">
			<tr>
				<th scope="col">#</th>
				<th scope="col">Name</th>
				<th scope="col">Designation</th>
				<th scope="col">Actions</th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="user, iterStat : ${users}">
				<th scope="row" th:text="${iterStat.count}">1</th>
				<td th:text="${user.userFname} + ' ' + ${user.userLname}">John
					Doe</td>
				<td th:text="${user.designation.desigName}">johndoe</td>
<td>
	<div class="d-flex flex-column flex-lg-row gap-2 align-items-center">

		<!-- View Button -->
		<a class="btn btn-sm btn-outline-primary d-flex align-items-center justify-content-center px-2 py-1"
		   th:onclick="'loadContent(\'/officials_details/' + ${xorMaskHelper.mask(user.userId)} + '\', \'modal\')'">
			<i class="fas fa-eye"
			   th:classappend="${user.userStatus == 1} ? ' text-success' : ' text-danger'"></i>
			<span class="ms-1">View</span>
		</a>

		<!-- Edit Button -->
		<a class="btn btn-sm btn-outline-primary d-flex align-items-center justify-content-center px-2 py-1"
		   th:if="${(!isChild and #authorization.expression('hasAuthority(''PRIV_officials_edit'')')) 
                or (isChild and #authorization.expression('hasAuthority(''PRIV_officials_edit_child'')'))}"
		   th:onclick="'loadContent(\'/officials_edit/' + ${xorMaskHelper.mask(user.userId)} + '\', \'modal\')'">
			<i class="fas fa-edit"></i>
			<span class="ms-1">Edit</span>
		</a>

	</div>
</td>


			</tr>
			<tr th:if="${#lists.isEmpty(users)}">
				<td colspan="7" class="text-center py-3">No Officials found</td>
			</tr>
		</tbody>
	</table>
</div>
</div>
