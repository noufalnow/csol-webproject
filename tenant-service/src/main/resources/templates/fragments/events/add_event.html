<!-- fragments/add_event_to_host.html -->
<div class="container">
	<div class="modal-header">
        <h5 class="modal-title" id="addEventModalLabel" th:text="${pageTitle}">Add New Event</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <!-- Modal Body -->
      <div class="modal-body">
        <form id="addEventForm" action="/events/html/addevent" method="post" th:object="${event}">
          <div class="row mb-2">
            <div class="col-12">
              <label for="event_name" class="form-label">Event Name</label>
              <input type="text" id="event_name" name="eventName" th:field="*{eventName}" class="form-control" required>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-6">
              <label for="event_start" class="form-label">Start Date</label>
              <input type="date" id="event_start" name="eventPeriodStart" th:field="*{eventPeriodStart}" class="form-control" required>
            </div>
            <div class="col-md-6">
              <label for="event_end" class="form-label">End Date</label>
              <input type="date" id="event_end" name="eventPeriodEnd" th:field="*{eventPeriodEnd}" class="form-control" required>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-6">
              <label for="event_venue" class="form-label">Venue</label>
              <input type="text" id="event_venue" name="eventVenue" th:field="*{eventVenue}" class="form-control" required>
            </div>
            <div class="col-md-6">
              <label for="event_phone" class="form-label">Official Phone</label>
              <input type="tel" id="event_phone" name="eventOfficialPhone" th:field="*{eventOfficialPhone}" class="form-control" required>
            </div>
          </div>
          <div class="row mb-2">
            <div class="col-md-6">
              <label for="event_year" class="form-label">Year</label>
              <input type="number" id="event_year" name="eventYear" th:field="*{eventYear}" min="2000" max="2100" class="form-control" required>
            </div>
          </div>
          <div id="error-messages" class="text-danger"></div>
        </form>
      </div>
      <!-- Modal Footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" onclick="submitHtmlForm('addEventForm', '#events_target')">Add Event</button>
      </div>
  </div>


<style>
    form {
        max-width: 100%;
    }
    .form-control[readonly] {
        background-color: #e9ecef;
        opacity: 1;
    }
</style>

<script>
    // Date validation to ensure end date is after start date
    document.getElementById('event_start').addEventListener('change', function() {
        const endDate = document.getElementById('event_end');
        if (this.value && endDate.value && endDate.value < this.value) {
            endDate.value = this.value;
        }
        endDate.min = this.value;
    });
</script>