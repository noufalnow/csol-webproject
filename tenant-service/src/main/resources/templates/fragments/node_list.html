<!-- fragments/node_list.html -->
<div th:fragment="content">
    <h1 th:text="${pageTitle}">Node List D</h1>

    <!-- Search Form -->
    <form id="search-form" method="GET" class="mb-3 d-flex">
        <input type="text" name="search" class="form-control me-2" placeholder="Search..." th:value="${search}">
        <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <!-- Action Links -->
    <div class="mb-3">
        <a class="ajax-link btn btn-outline-success me-2" href="javascript:void(0);"
           th:onclick="'loadContent(\'/nodes/html/add?parentId=' + ${parentId} + '\', \'modal\')'">
            <i class="fas fa-plus"></i> Add New Node
        </a>
    </div>

    <!-- Node Table -->
    <div class="table-responsive">
        <table class="table table-striped table-hover table-bordered align-middle">
            <thead class="table-light">
                <tr>
                    <th scope="col">
                        <a href="#" class="sort text-decoration-none" data-field="nodeId"
                           th:attr="data-dir=${sortStatus['nodeId'] != null ? sortStatus['nodeId'] : 'asc'}"
                           onclick="sortEntities('nodeId')">ID</a>
                    </th>
                    <th scope="col">
                        <a href="#" class="sort text-decoration-none" data-field="nodeName"
                           th:attr="data-dir=${sortStatus['nodeName'] != null ? sortStatus['nodeName'] : 'asc'}"
                           onclick="sortEntities('nodeName')">Name</a>
                    </th>
                    <th scope="col">
                        <a href="#" class="sort text-decoration-none" data-field="nodeType"
                           th:attr="data-dir=${sortStatus['nodeType'] != null ? sortStatus['nodeType'] : 'asc'}"
                           onclick="sortEntities('nodeType')">Type</a>
                    </th>
                    <th scope="col">Status</th>
                    <th scope="col">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="node : ${items}">
                    <td th:text="${node.nodeId}">1</td>
                    <td th:text="${node.nodeName}">Node Name</td>
                    <td th:text="${node.nodeType}">Type</td>
                    <td>
                        <span th:classappend="${node.nodeStatus == 1} ? 'badge bg-success' : 'badge bg-secondary'"
                              th:text="${node.nodeStatus == 1} ? 'Active' : 'Inactive'">Status</span>
                    </td>
                    <td>
                        <a class="ajax-link btn btn-sm btn-outline-primary me-1" href="javascript:void(0);"
                           th:onclick="'loadContent(\'/nodes/html/' + ${node.nodeId} + '\', \'#content\')'">
                            <i class="fas fa-eye"></i> View
                        </a>
                        <a class="ajax-link btn btn-sm btn-outline-secondary" href="javascript:void(0);"
                           th:onclick="'loadContent(\'/nodes/html/edit/' + ${node.nodeId} + '\', \'modal\')'">
                            <i class="fas fa-edit"></i> Edit
                        </a>
                    </td>
                </tr>
                <!-- Empty state -->
                <tr th:if="${#lists.isEmpty(items)}">
                    <td colspan="5" class="text-center">No nodes found</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    <div th:replace="~{fragments/pagination :: pagination}"
         th:with="currentPage=${currentPage}, totalPages=${totalPages}, size=${size}, sortField=${sortField}, sortDir=${sortDir}, pageUrl='/nodes/html'"></div>
</div>
