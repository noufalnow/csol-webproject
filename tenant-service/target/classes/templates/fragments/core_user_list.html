<!-- src/main/resources/templates/fragments/core_user_list.html -->
<div th:fragment="content">
    <h1>User List</h1>
    <a class="ajax-link" href="/users/html/add">Add New User</a>
    <table>
<thead>
    <tr>
        <th>ID</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Username</th>
        <th>Email</th>
        <th>Actions</th>
    </tr>
</thead>
<tbody>
    <tr th:each="user : ${users}">
        <td th:text="${user.userId}"></td>
        <td th:text="${user.userFname}"></td>
        <td th:text="${user.userLname}"></td>
        <td th:text="${user.userUname}"></td>
        <td th:text="${user.userEmail}"></td>
        <td>
            <!-- View User Details -->
            <a class="ajax-link" th:href="@{/users/html/{id}(id=${user.userId})}">View</a>
            <!-- Update User -->
			<a class="ajax-link" th:href="@{/users/html/edit/{id}(id=${user.userId})}">Update</a>
			
			<a href="javascript:void(0);" 
			   class="status-toggle"
			   th:attr="data-id=${user.userId}, data-url=@{/users/html/toggleStatus}"
			   th:text="${user.userStatus == 1 ? 'Disable' : 'Enable'}">
			</a>
			
			<!-- Flag element to indicate active/inactive status -->
			<span th:id="'flag_' + ${user.userId}" 
			      th:classappend="${user.userStatus == 1 ? 'active_green' : 'inactive_red'}">
			</span>

            <!-- Reset Password -->
            <a class="ajax-link" th:href="@{/users/html/resetPassword/{id}(id=${user.userId})}">Reset Password</a>
        </td>
    </tr>
</tbody>

    </table>
</div>

<script>

status_toggle();
</script>
